import t from "../../lib/State.js"; import { CANVAS_HEIGHT as e, CANVAS_WIDTH as r, context as a, stateMachine as s, timer as i } from "../globals.js"; export default class n extends t { constructor() { super(), this.transitionAlpha = 0, this.currentState = null } enter(t) { this.fromState = t.fromState, this.toState = t.toState, this.toStateEnterParameters = t.toStateEnterParameters, this.currentState = this.fromState, this.transitionAlpha = 0, this.fadeOut() } update(t) { i.update(t) } render() { this.currentState.render(), a.fillStyle = `rgb(0, 0, 0, ${this.transitionAlpha})`, a.fillRect(0, 0, r, e) } fadeOut() { i.tween(this, ["transitionAlpha"], [1], 1.5, () => { this.currentState = this.toState, this.currentState.enter(this.toStateEnterParameters), this.fadeIn() }) } fadeIn() { i.tween(this, ["transitionAlpha"], [0], 1.5, () => { s.currentState = this.currentState }) } };